# üõ°Ô∏è –û–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ø–æ–∫—É–ø–æ–∫

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∫—É–ø–∫–∏ –∏–≥—Ä–æ–≤—ã—Ö —Å–∫–∏–Ω–æ–≤. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JWT –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ Redis –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞–º–∏.

## üîê –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (Signup)**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ.
2. **–í—Ö–æ–¥ (Sign In)**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–≤–æ–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Ö –∏ –≤—ã–¥–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω—ã:
   - **Access Token**: –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–π —Ç–æ–∫–µ–Ω, –¥–µ–π—Å—Ç–≤—É—é—â–∏–π 2 –º–∏–Ω—É—Ç—ã.
   - **Refresh Token**: –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π —Ç–æ–∫–µ–Ω, —Ö—Ä–∞–Ω—è—â–∏–π—Å—è –≤ Redis, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ access —Ç–æ–∫–µ–Ω–∞.
3. **–í—ã—Ö–æ–¥ (Sign Out)**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã, —á—Ç–æ –∞–Ω–Ω—É–ª–∏—Ä—É–µ—Ç –≤—Å–µ —Ç–æ–∫–µ–Ω—ã.

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üîë –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

- **POST** `/auth/signup`: üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  - **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
    - üìß `email`: —Å—Ç—Ä–æ–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
    - üîë `password`: —Å—Ç—Ä–æ–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)

- **POST** `/auth/signin`: üîì –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤.
  - **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
    - üìß `email`: —Å—Ç—Ä–æ–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
    - üîë `password`: —Å—Ç—Ä–æ–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)

- **GET** `/auth/info`: üìÑ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ. 
  - **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
  - üîí –¢—Ä–µ–±—É–µ—Ç—Å—è Bearer –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.

- **PATCH** `/auth/change-password`: üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  - **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
    - üîë `oldPassword`: —Å—Ç—Ä–æ–∫–∞ (—Å—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
    - üîë `newPassword`: —Å—Ç—Ä–æ–∫–∞ (–Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
  - üîí –¢—Ä–µ–±—É–µ—Ç—Å—è Bearer –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.

- **GET** `/auth/refresh`: üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º refresh —Ç–æ–∫–µ–Ω–∞.
  - **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
  - üîí –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ `refresh-token` —Å —Ç–æ–∫–µ–Ω–æ–º, –∞ —Ç–∞–∫–∂–µ Bearer –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.

- **GET** `/auth/signout`: üîí –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã.
  - **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
  - üîí –¢—Ä–µ–±—É–µ—Ç—Å—è Bearer –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.

### üí∏ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø–æ–∫—É–ø–æ–∫

- **POST** `/purchase`: üíµ –ü–æ–∫—É–ø–∫–∞ —Å–∫–∏–Ω–∞, –≤–∫–ª—é—á–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–ª–∞—Ç–µ–∂–µ.
  - **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** (DTO: `BuySkinDto`):
    - üéÆ `skinId`: UUID (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–∫–∏–Ω–∞, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
    - üìè `quantity`: —á–∏—Å–ª–æ (—Ü–µ–ª–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 1, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
    - üí≥ `paymentInfo`: –æ–±—ä–µ–∫—Ç `PaymentInfo`, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ:
      - üè¶ `method`: —Å—Ç—Ä–æ–∫–∞ (–º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
  - üîí –¢—Ä–µ–±—É–µ—Ç—Å—è Bearer –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.

### üñåÔ∏è –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–∫–∏–Ω–∞–º–∏

- **GET** `/skinport/get-minimum-prices`: üè∑Ô∏è –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω –Ω–∞ —Å–∫–∏–Ω—ã —Å –≤–Ω–µ—à–Ω–µ–≥–æ API (Skinport).
  - **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** (DTO: `GetMinimumPricesForItemsDto`):
    - üÜî `app_id`: —á–∏—Å–ª–æ (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
    - üí± `currency`: —Å—Ç—Ä–æ–∫–∞ (–≤–∞–ª—é—Ç–∞, —Ç–∏–ø `Currency`, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî `EUR`, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
    - üîÑ `tradable`: —á–∏—Å–ª–æ (–∑–Ω–∞—á–µ–Ω–∏–µ 0 –∏–ª–∏ 1, —É–∫–∞–∑—ã–≤–∞–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–∫–∏–Ω —Ç–æ—Ä–≥—É–µ–º—ã–º, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
  - üîí –¢—Ä–µ–±—É–µ—Ç—Å—è Bearer –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.
  
## üìä ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞

### üìê ER-–¥–∏–∞–≥—Ä–∞–º–º–∞

```mermaid
erDiagram
    User {
        UUID id PK
        STRING email
        STRING password
        DATETIME createdAt
        DATETIME updatedAt
        DATETIME deletedAt
    }
    Balance {
        UUID id PK
        FLOAT amount
        DATETIME createdAt
        DATETIME updatedAt
        DATETIME deletedAt
    }
    Purchase {
        UUID id PK
        UUID skinId
        INT quantity
        DATETIME createdAt
        DATETIME updatedAt
        DATETIME deletedAt
    }
    Skin {
        UUID id PK
        STRING marketHashName
        FLOAT price
        INT quantity
        DATETIME createdAt
        DATETIME updatedAt
        DATETIME deletedAt
    }
    SkinTransaction {
        UUID id PK
        FLOAT totalAmount
        STRING paymentMethod
        DATETIME createdAt
        DATETIME updatedAt
        DATETIME deletedAt
    }
    UserItem {
        UUID id PK
        INT quantity
        DATETIME createdAt
        DATETIME updatedAt
        DATETIME deletedAt
    }

    User ||--|{ Purchase : "has purchases"
    User ||--o| Balance : "has balance"
    User ||--|{ UserItem : "has items"
    Purchase ||--o| SkinTransaction : "linked to transaction"
    Purchase }|--|| User : "belongs to user"
    Skin ||--|{ UserItem : "is owned by users"
```
## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ï—Å–ª–∏ —á—Ç–æ —Ç–æ –Ω–µ —Ç–∞–∫, –º–æ–∂–µ—Ç–µ –ø–ª–∑ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç—ã –≤ hh –∏–ª–∏ –≤ git üòä
